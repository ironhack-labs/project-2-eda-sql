"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9437],{27786:function(e,t,n){n.d(t,{I:function(){return h},Q:function(){return S}});var a=n(52322),r=n(14865),i=n(2784),o=n(79855),s=n(19596),c=n(75217),u=n(91842),l=n(96446),d=n(60795),_=n(17727),m=n(95554),g=n(25869),T=n(52060),f=n(93156);let E=e=>{let{associatedConstId:t,entityType:n,initialAggregateData:r,initialUserData:s,className:c,testIdSuffix:u}=e,E=(0,o.Z)(),h=(0,l.nu)();(0,f.Z)({associatedConstId:t,entityType:n,initialAggregateData:r,initialUserData:s});let S=(0,_.i9)(t,d.ly.EMOJI),O=(0,_.i9)(t,d.ly.INTERESTING),R=(0,g.VB)(t),b=(0,_.AE)(t,h),I=i.useMemo(()=>(0,T.lu)(O,R,n,E),[O,R,n,E]),N=i.useMemo(()=>(0,T.Nf)(S,R,n,E),[S,R,n,E]);return b===m.e.FETCHING?(0,a.jsx)(p,{className:c,"data-testid":d.z7.REACTION_SUMMARY_LOADING_SPACER}):b!==m.e.ERROR&&S&&O?(0,a.jsx)(U,{likeAriaLabel:I.accessibilityLabel,likeCount:I.label,likeActive:I.active,reactionAriaLabel:N.accessibilityLabel,reactionCount:N.label,reactionActive:N.active,primaryReaction:N.primaryReaction,secondaryReaction:N.secondaryReaction,className:c,"data-testid":`${d.z7.REACTION_SUMMARY}${u}`}):null},h=e=>r.isBrowser?(0,a.jsx)(E,{...e}):(0,a.jsx)(p,{className:e.className,"data-testid":d.z7.REACTION_SUMMARY_LOADING_SPACER}),S=e=>(0,a.jsx)(O,{children:(0,a.jsx)(h,{...e})}),U=(0,s.styled)(c.A).withConfig({componentId:"sc-11d104ba-0"})(["height:",";animation:reaction-summary-fade-in ","ms ease-in;@keyframes reaction-summary-fade-in{from{opacity:0;}to{opacity:1;}}"],u.spacing.l,300),p=s.styled.div.withConfig({componentId:"sc-11d104ba-1"})(["width:",";margin-left:",";vertical-align:top;margin-right:",";height:",";"],u.spacing.m,u.spacing.xxs,u.spacing.xs,u.spacing.l),O=s.styled.div.withConfig({componentId:"sc-11d104ba-2"})(["margin-left:-",";"],u.spacing.xxs)},60795:function(e,t,n){n.d(t,{$N:function(){return u},Ev:function(){return f},G5:function(){return T},N2:function(){return m},PO:function(){return c},bq:function(){return d},cC:function(){return _},kL:function(){return l},ly:function(){return s},z7:function(){return g}});var a=n(16630),r=n.n(a),i=n(24667),o=n(49442);let s={INTERESTING:"INTERESTING",EMOJI:"EMOJI"},c={THUMBS_UP:"interesting.thumbsup",THUMBS_DOWN:"interesting.thumbsdown",EXCITED:"emoji.excited",LIGHTBULB:"emoji.lightbulb",CLAP:"emoji.clappinghands",HEART:"emoji.heart",LAUGH:"emoji.laugh"},u=new(r())([c.THUMBS_DOWN,c.THUMBS_UP]),l={[c.THUMBS_DOWN]:c.THUMBS_UP,[c.THUMBS_UP]:c.THUMBS_DOWN},d={[c.EXCITED]:o.o5.STAR_EYES,[c.LIGHTBULB]:o.o5.LIGHT_BULB,[c.CLAP]:o.o5.CLAP,[c.HEART]:o.o5.HEART,[c.LAUGH]:o.o5.LAUGH},_={[c.THUMBS_DOWN]:"thumbs-down",[c.THUMBS_UP]:"thumbs-up",...d},m=(0,i.vU)({SELECTOR_EMOJI_DROPDOWN_BUTTON:{defaultMessage:"Open reactions menu",id:"feature_reactions_selector_open_menu"}}),g={REACTION_SELECTOR_SPACER:"reaction-selector-wrapper-spacing",REACTION_SELECTOR:"reaction-selector",REACTION_SUMMARY:"reaction-summary",REACTION_SUMMARY_LOADING_SPACER:"reaction-summary-loading-spacer"},T={CHIP:"chip",BUTTON:"button",MENU:"menu",ACTIVE:"active",INACTIVE:"inactive"},f={REACTION_AFFIX:"rx",SIGNED_OUT_PREFIX:"tmp",REACTION_UPDATE_STATE:{ADD:"add",DELETE:"del"},REACTION_MENU_OPEN:"react-open",REACTION_IDS_PREFIX:{[c.THUMBS_UP]:"tmup",[c.THUMBS_DOWN]:"tmdn",[c.EXCITED]:"stry",[c.LIGHTBULB]:"litblb",[c.CLAP]:"clp",[c.HEART]:"hrt",[c.LAUGH]:"lagh"}}},52060:function(e,t,n){n.d(t,{BO:function(){return I},Fh:function(){return N},Nc:function(){return M},Nf:function(){return b},lu:function(){return R},pY:function(){return y},pp:function(){return A},uF:function(){return C}});var a=n(16630),r=n.n(a),i=n(58036),o=n(60795),s=n(95554),c=n(43085);let u="Unexpected Reaction Label Information",l="feature_reactions_summary",d={USER_ONLY:"user_only",USER_AND_OTHERS:"user_and_others",OTHERS:"others",NONE:"none"},_={EMOJI_UNCOUNTED:"emoji",EMOJI_ONE:"emoji_one",EMOJI_TWO:"emoji_two",LIKES:"likes"},m=(e,t)=>t.formatNumber(e,{notation:"compact",compactDisplay:"short"}),g=e=>Object.keys(e.reactions).map(t=>({count:e.reactions[t].count,reaction:t,text:e.reactions[t].text})).sort((e,t)=>t.count-e.count),T=(e,t)=>t.formatMessage({id:"feature_reactions_selector_like_label",defaultMessage:"{likeCount, plural, =0 {Like} =1 {Like with 1 person} other {Like with {likeCount} people}}"},{likeCount:e}),f=(e,t)=>t.formatMessage({id:"feature_reactions_selector_like_title",defaultMessage:"{active, select, true {Select to remove like} other {Select to like}}"},{active:e}),E=e=>e.formatMessage({id:"feature_reactions_selector_dislike_label",defaultMessage:"Dislike"}),h=(e,t)=>t.formatMessage({id:"feature_reactions_selector_dislike_title",defaultMessage:"{active, select, true {Select to remove dislike} other {Select to dislike}}"},{active:e}),S=(e,t,n)=>n.formatMessage({id:"feature_reactions_selector_reaction_label",defaultMessage:"{reactionCount, plural, =0 {React {reactionName}} =1 {React {reactionName} with 1 person} other {React {reactionName} with {reactionCount} people}}"},{reactionName:e,reactionCount:t}),U=(e,t,n)=>n.formatMessage({id:"feature_reactions_selector_reaction_title",defaultMessage:"{active, select, true {Select to remove reaction {reactionName}} other {Select to react {reactionName}}}"},{active:e,reactionName:t}),p=(e,t,n,a)=>{let r=d.NONE,i=e;return t?r=--i?d.USER_AND_OTHERS:d.USER_ONLY:i&&(r=d.OTHERS),a.formatMessage({id:`${l}_${n}_${_.LIKES}_${r}`,defaultMessage:u},{likeCount:i})},O=(e,t,n,a,r,i)=>{let o=d.NONE,s=_.EMOJI_UNCOUNTED,c=e;return e&&(t?(c--,i&&c--,o=c?d.USER_AND_OTHERS:d.USER_ONLY):o=d.OTHERS,s=i?_.EMOJI_TWO:_.EMOJI_ONE),a.formatMessage({id:`${l}_${n}_${s}_${o}`,defaultMessage:u},{reactionCount:c,primaryReaction:r,secondaryReaction:i})},R=(e,t,n,a)=>{if(!e||!t)return{label:"0",active:!1,accessibilityLabel:p(0,!1,n,a)};let r=e.reactions[o.PO.THUMBS_UP],i=t.includes(o.PO.THUMBS_UP),s=r?.count??0;return{accessibilityLabel:p(s,i,n,a),label:m(s,a),active:i}},b=(e,t,n,a)=>{let i,s;if(!e||!t)return{active:!1,label:"0",accessibilityLabel:O(0,!1,n,a)};let c=g(e),u=Array.from(new(r())(t).difference(o.$N)),l=u.length>0;l?(i=u[0],s=u[1]):(i=c[0]?.count?c[0]?.reaction:void 0,s=c[1]?.count?c[1]?.reaction:void 0);let d=O(e.total,l,n,a,i?e.reactions[i]?.text:void 0,s?e.reactions[s]?.text:void 0);return{active:l,label:m(e.total,a),accessibilityLabel:d,primaryReaction:i?o.bq[i]:void 0,secondaryReaction:s?o.bq[s]:void 0}},I=(e,t,n,a)=>{let r;if(!e||!t)return{thumbUpCount:"0",thumbUpId:o.PO.THUMBS_UP,thumbDownId:o.PO.THUMBS_DOWN,thumbUpAriaLabel:T(0,n),thumbDownAriaLabel:E(n),thumbUpTestId:(0,c.O)(o.PO.THUMBS_UP,!1,"button",a),thumbDownTestId:(0,c.O)(o.PO.THUMBS_DOWN,!1,"button",a),thumbUpTitle:f(!1,n),thumbDownTitle:h(!1,n)};let s=e.reactions[o.PO.THUMBS_UP]?.count??0,u=m(s,n);return t.includes(o.PO.THUMBS_UP)?r=i.ReactionSelectorThumbState.THUMBS_UP:t.includes(o.PO.THUMBS_DOWN)&&(r=i.ReactionSelectorThumbState.THUMBS_DOWN),{thumbUpCount:u,userThumbState:r,thumbUpId:o.PO.THUMBS_UP,thumbDownId:o.PO.THUMBS_DOWN,thumbUpAriaLabel:T(s,n),thumbDownAriaLabel:E(n),thumbUpTestId:(0,c.O)(o.PO.THUMBS_UP,r===i.ReactionSelectorThumbState.THUMBS_UP,"button",a),thumbDownTestId:(0,c.O)(o.PO.THUMBS_DOWN,r===i.ReactionSelectorThumbState.THUMBS_DOWN,"button",a),thumbUpTitle:f(r===i.ReactionSelectorThumbState.THUMBS_UP,n),thumbDownTitle:h(r===i.ReactionSelectorThumbState.THUMBS_DOWN,n)}},N=(e,t,n,a)=>{if(!e||!t)return[];let r=[];return Object.entries(e.reactions).forEach(e=>{let[i,s]=e,u=t.includes(i),l={name:o.bq[i],label:s.text},d=S(l.label||"",s.count,n),_=S(l.label||"",0,n),g=U(u,l.label||"",n);r.push({reaction:l,reactionId:i,hasUserReacted:u,reactionAriaLabel:d,reactionAriaDescriptor:_,reactionCount:m(s.count,n),reactionChipTestId:(0,c.O)(i,u,"chip",a),reactionButtonTestId:(0,c.O)(i,u,"button",a),reactionTitle:g})}),r},M=e=>e?.reduce((e,t)=>({...e,[t.reaction.reactionId]:t}),{}),A=e=>e?.reduce((e,t)=>({...e,[t.groupId]:{totalCount:t.aggregateCount,summary:t.reactionSummaries.reduce((e,t)=>({...e,[t.reaction.reactionId]:{count:t.count,text:t.reaction.text}}),{})}}),{}),C=e=>!e||e===s.e.ERROR,y=e=>!e},43085:function(e,t,n){n.d(t,{F:function(){return i},O:function(){return r}});var a=n(60795);let r=(e,t,n,r)=>`${a.z7.REACTION_SELECTOR}-${r}-${a.cC[e]}-${n}-${t?a.G5.ACTIVE:a.G5.INACTIVE}`,i=e=>`${a.z7.REACTION_SELECTOR}-${e}-${a.G5.MENU}-${a.G5.BUTTON}`},93156:function(e,t,n){n.d(t,{Z:function(){return A}});var a=n(2784),r=n(14865),i=n(947),o=n.n(i),s=n(26806),c=n(94177),u=n(85767),l=n(79262),d=n(96446),_=n(26572),m=n(95554),g=n(25869),T=n(52060),f=n(16630),E=n.n(f),h=n(30382),S=n.n(h);let U=S()`
    fragment SharedVideoUserReactions on Video {
        id
        userReactions {
            entityId
            lastUpdated
            reaction {
                language {
                    id
                    text
                }
                reactionId
                text
                id
            }
        }
    }
`,p=S()`
    fragment SharedVideoReactions on Video {
        id
        reactionsSummary {
            reactionSummaryGroups {
                aggregateCount
                displayCount {
                    value
                    language
                }
                groupId
                reactionSummaries {
                    reaction {
                        language {
                            id
                            text
                        }
                        reactionId
                        text
                        id
                    }
                    count
                    displayCount {
                        value
                        language
                    }
                }
                selectionType
            }
        }
    }
`,O={query:S()`
    query ReactionsForVideo(
        $aggregateVideoConsts: [ID!]!
        $userVideoConsts: [ID!]!
    ) {
        aggregateVideos: videos(ids: $aggregateVideoConsts) {
            ...SharedVideoReactions
        }

        userVideos: videos(ids: $userVideoConsts) {
            ...SharedVideoUserReactions
        }
    }
    ${U}
    ${p}
`,createQueryVariablesMap:e=>{let t=[],n=[];return e.forEach((e,a)=>{e.needAggregate&&t.push(a),e.needUser&&n.push(a)}),{aggregateVideoConsts:t,userVideoConsts:n}},parseResponseDataToState:(e,t,n,a,r)=>{if(t.aggregateVideoConsts.length){let n=new(E())(t.aggregateVideoConsts),r={};e?.aggregateVideos?.forEach(e=>{e&&(r[e.id]=T.pp(e.reactionsSummary?.reactionSummaryGroups)||{},n.delete(e.id))}),a.setBulkAggregateReactions(r),n.size&&a.setFetchedStatus(Array.from(n),m.e.ERROR)}if(t.userVideoConsts.length){let n=new(E())(t.userVideoConsts),a={};e?.userVideos?.forEach(e=>{e&&(a[e.id]=T.Nc(e?.userReactions)||{},n.delete(e.id))}),r.initializeBulkUserReactions(a),n.size&&r.setFetchedStatus(Array.from(n),m.e.ERROR)}}},R=e=>{if("video"===e)return O;throw Error("Reactions attempting to be batched for an unexpected entity")},{source:b,next:I}=(0,c.nN)();r.isBrowser&&(0,c.zG)(b,(0,c.f3)((0,c.FG)(100)),(0,c.qn)(50),(0,c.Ld)(e=>{let{client:t,context:n,aggregateStoreHandlers:a,userStoreHandlers:r}=e[0],i=e.reduce((e,t)=>(t.requestInfo.forEach((n,a)=>{let r=n.entityType;if(e.has(r)||e.set(r,{reactionRequests:new Map,batchInfo:t.batchInfo}),e.get(r)?.reactionRequests.has(a)){let t=e.get(r)?.reactionRequests?.get(a)??{needUser:!0,needAggregate:!0};e.get(r)?.reactionRequests.set(a,{entityType:r,needUser:t.needUser&&n.needUser,needAggregate:t.needAggregate&&n.needAggregate})}else e.get(r)?.reactionRequests.set(a,n)}),e),new Map),s=[],c=[];i.forEach(e=>{c.push(e.batchInfo.parseResponseDataToState),s.push({query:e.batchInfo.query,variables:e.batchInfo.createQueryVariablesMap(e.reactionRequests)})});let u=o()("BatchedReactions").add(s[0].query,s[0].variables);s.slice(1).reduce((e,t)=>e.add(t.query,t.variables),u),t.query(u.document,u.variables,n).toPromise().then(e=>{c.forEach(t=>t(e.data,u.variables||{},e.error,a,r))})}));let N=(e,t)=>{let n=(0,d.nu)(),{setFetchedStatus:a}=(0,_.l)(),{setFetchedStatus:r}=(0,g.og)(),i=(0,_.B8)(),o=(0,g.Di)();return e.forEach((s,c)=>{s.needAggregate=s.needAggregate&&(0,T.pY)(i.current[c]),s.needUser=s.needUser&&n&&(0,T.pY)(o.current[c]),(s.needUser||s.needAggregate)&&s.entityType===t||e.delete(c),s.needAggregate&&a(c,m.e.FETCHING),s.needUser&&r(c,m.e.FETCHING)}),e},M=(e,t)=>{let{context:n}=(0,u.B)(),r=(0,s.m8)(),i=R(t),o=(0,a.useMemo)(()=>(0,l.Z)({serverSideCacheable:!1,personalized:!0},n),[n]),c=(0,_.l)(),d=(0,g.og)(),m=N(e,t);m.size&&I({client:r,context:o,batchInfo:i,aggregateStoreHandlers:c,userStoreHandlers:d,requestInfo:m})},A=e=>{let{associatedConstId:t,entityType:n,initialAggregateData:r,initialUserData:i}=e,{initializeUserReactions:o}=(0,g.og)(),{setAggregateReactions:s}=(0,_.l)(),c=(0,g.KY)(t),u=!(0,T.uF)(c)||!!i;a.useEffect(()=>{(0,T.uF)(c)&&i&&o(t,i)},[i]);let l=(0,_.if)(t),d=!(0,T.uF)(l)||!!r;a.useEffect(()=>{(0,T.uF)(l)&&r&&s(t,r)},[r]),M(new Map([[t,{needUser:!u,needAggregate:!d,entityType:n}]]),n)}},38270:function(e,t,n){var a,r;function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if(e<=0)return"hours_minutes_explicit"===t?"0min":"hours_minutes_explicit_short"===t?"0m":"iso_8601"===t?"PT0S":"0:00";let n=Math.floor(e/3600),a=Math.floor(e%3600/60),r=Math.floor(e%60);if("hours_minutes_explicit"===t||"hours_minutes_explicit_short"===t)return(e<60&&e>0&&(a=1),n>0&&a<=0)?`${n}h`:`${n>0?n+"h "+a:a}${"hours_minutes_explicit_short"===t?"m":"min"}`;if("iso_8601"!==t)return`${n>0?n+":"+o(a):a}:${o(r)}`;{let e=n?`${n}H`:"",t=a?`${a}M`:"",i=r?`${r}S`:"";return`PT${e}${t}${i}`}}function o(e){return e<=0||!Number.isInteger(e)?"00":e>9?`${e}`:`0${e}`}n.d(t,{A:function(){return a},L:function(){return i}}),(r=a||(a={})).DEFAULT="default",r.HOURS_MINUTES_EXPLICIT="hours_minutes_explicit",r.HOURS_MINUTES_EXPLICIT_SHORT="hours_minutes_explicit_short",r.ISO_8601="iso_8601"},87961:function(e,t,n){n.d(t,{S:function(){return r}});var a=n(19596);let r=e=>(0,a.css)(["@supports (-webkit-line-clamp:","){display:-webkit-box;-webkit-line-clamp:",";-webkit-box-orient:vertical;overflow:hidden;}"],e,e)}}]);